<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Manish Saraswat" />

<meta name="date" content="2022-05-10" />

<title>Introduction to SuperML</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to SuperML</h1>
<h4 class="author">Manish Saraswat</h4>
<h4 class="date">2022-05-10</h4>



<p>SuperML R package is designed to unify the model training process in R like Python. Generally, it’s seen that people spend lot of time in searching for packages, figuring out the syntax for training machine learning models in R. This behaviour is highly apparent in users who frequently switch between R and Python. This package provides a python´s scikit-learn interface (<code>fit</code>, <code>predict</code>) to train models faster.</p>
<p>In addition to building machine learning models, there are handy functionalities to do feature engineering</p>
<p>This ambitious package is my ongoing effort to help the r-community build ML models easily and faster in R.</p>
<div id="install" class="section level2">
<h2>Install</h2>
<p>You can install latest cran version using (recommended):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;superml&quot;</span>)</a></code></pre></div>
<p>You can install the developmemt version directly from github using:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;saraswatmks/superml&quot;</span>)</a></code></pre></div>
</div>
<div id="caveats-on-superml-installation" class="section level2">
<h2>Caveats on superml installation</h2>
<p>For machine learning, superml is based on the existing R packages. Hence, while installing the package, we don’t install all the dependencies. However, while training any model, superml will automatically install the package if its not found. Still, if you want to install all dependencies at once, you can simply do:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;superml&quot;</span>, <span class="dt">dependencies=</span><span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="examples---machine-learning-models" class="section level2">
<h2>Examples - Machine Learning Models</h2>
<p>This package uses existing r-packages to build machine learning model. In this tutorial, we’ll use data.table R package to do all tasks related to data manipulation.</p>
<div id="regression-data" class="section level3">
<h3>Regression Data</h3>
<p>We’ll quickly prepare the data set to be ready to served for model training.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">load</span>(<span class="st">&quot;../data/reg_train.rda&quot;</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># if the above doesn't work, you can try: load(&quot;reg_train.rda&quot;)</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">library</span>(data.table)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">library</span>(caret)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; Loading required package: ggplot2</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; Loading required package: lattice</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">library</span>(superml)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="kw">library</span>(Metrics)</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; Attaching package: 'Metrics'</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; The following objects are masked from 'package:caret':</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;     precision, recall</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="kw">head</span>(reg_train)</a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;    Id MSSubClass MSZoning LotFrontage LotArea Street Alley LotShape LandContour</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; 1:  1         60       RL          65    8450   Pave  &lt;NA&gt;      Reg         Lvl</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; 2:  2         20       RL          80    9600   Pave  &lt;NA&gt;      Reg         Lvl</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; 3:  3         60       RL          68   11250   Pave  &lt;NA&gt;      IR1         Lvl</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; 4:  4         70       RL          60    9550   Pave  &lt;NA&gt;      IR1         Lvl</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; 5:  5         60       RL          84   14260   Pave  &lt;NA&gt;      IR1         Lvl</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; 6:  6         50       RL          85   14115   Pave  &lt;NA&gt;      IR1         Lvl</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt;    Utilities LotConfig LandSlope Neighborhood Condition1 Condition2 BldgType</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; 1:    AllPub    Inside       Gtl      CollgCr       Norm       Norm     1Fam</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt; 2:    AllPub       FR2       Gtl      Veenker      Feedr       Norm     1Fam</span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt; 3:    AllPub    Inside       Gtl      CollgCr       Norm       Norm     1Fam</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt; 4:    AllPub    Corner       Gtl      Crawfor       Norm       Norm     1Fam</span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; 5:    AllPub       FR2       Gtl      NoRidge       Norm       Norm     1Fam</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; 6:    AllPub    Inside       Gtl      Mitchel       Norm       Norm     1Fam</span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt;    HouseStyle OverallQual OverallCond YearBuilt YearRemodAdd RoofStyle RoofMatl</span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; 1:     2Story           7           5      2003         2003     Gable  CompShg</span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; 2:     1Story           6           8      1976         1976     Gable  CompShg</span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"><span class="co">#&gt; 3:     2Story           7           5      2001         2002     Gable  CompShg</span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36"><span class="co">#&gt; 4:     2Story           7           5      1915         1970     Gable  CompShg</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37"><span class="co">#&gt; 5:     2Story           8           5      2000         2000     Gable  CompShg</span></a>
<a class="sourceLine" id="cb4-38" data-line-number="38"><span class="co">#&gt; 6:     1.5Fin           5           5      1993         1995     Gable  CompShg</span></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co">#&gt;    Exterior1st Exterior2nd MasVnrType MasVnrArea ExterQual ExterCond Foundation</span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co">#&gt; 1:     VinylSd     VinylSd    BrkFace        196        Gd        TA      PConc</span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41"><span class="co">#&gt; 2:     MetalSd     MetalSd       None          0        TA        TA     CBlock</span></a>
<a class="sourceLine" id="cb4-42" data-line-number="42"><span class="co">#&gt; 3:     VinylSd     VinylSd    BrkFace        162        Gd        TA      PConc</span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"><span class="co">#&gt; 4:     Wd Sdng     Wd Shng       None          0        TA        TA     BrkTil</span></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="co">#&gt; 5:     VinylSd     VinylSd    BrkFace        350        Gd        TA      PConc</span></a>
<a class="sourceLine" id="cb4-45" data-line-number="45"><span class="co">#&gt; 6:     VinylSd     VinylSd       None          0        TA        TA       Wood</span></a>
<a class="sourceLine" id="cb4-46" data-line-number="46"><span class="co">#&gt;    BsmtQual BsmtCond BsmtExposure BsmtFinType1 BsmtFinSF1 BsmtFinType2</span></a>
<a class="sourceLine" id="cb4-47" data-line-number="47"><span class="co">#&gt; 1:       Gd       TA           No          GLQ        706          Unf</span></a>
<a class="sourceLine" id="cb4-48" data-line-number="48"><span class="co">#&gt; 2:       Gd       TA           Gd          ALQ        978          Unf</span></a>
<a class="sourceLine" id="cb4-49" data-line-number="49"><span class="co">#&gt; 3:       Gd       TA           Mn          GLQ        486          Unf</span></a>
<a class="sourceLine" id="cb4-50" data-line-number="50"><span class="co">#&gt; 4:       TA       Gd           No          ALQ        216          Unf</span></a>
<a class="sourceLine" id="cb4-51" data-line-number="51"><span class="co">#&gt; 5:       Gd       TA           Av          GLQ        655          Unf</span></a>
<a class="sourceLine" id="cb4-52" data-line-number="52"><span class="co">#&gt; 6:       Gd       TA           No          GLQ        732          Unf</span></a>
<a class="sourceLine" id="cb4-53" data-line-number="53"><span class="co">#&gt;    BsmtFinSF2 BsmtUnfSF TotalBsmtSF Heating HeatingQC CentralAir Electrical</span></a>
<a class="sourceLine" id="cb4-54" data-line-number="54"><span class="co">#&gt; 1:          0       150         856    GasA        Ex          Y      SBrkr</span></a>
<a class="sourceLine" id="cb4-55" data-line-number="55"><span class="co">#&gt; 2:          0       284        1262    GasA        Ex          Y      SBrkr</span></a>
<a class="sourceLine" id="cb4-56" data-line-number="56"><span class="co">#&gt; 3:          0       434         920    GasA        Ex          Y      SBrkr</span></a>
<a class="sourceLine" id="cb4-57" data-line-number="57"><span class="co">#&gt; 4:          0       540         756    GasA        Gd          Y      SBrkr</span></a>
<a class="sourceLine" id="cb4-58" data-line-number="58"><span class="co">#&gt; 5:          0       490        1145    GasA        Ex          Y      SBrkr</span></a>
<a class="sourceLine" id="cb4-59" data-line-number="59"><span class="co">#&gt; 6:          0        64         796    GasA        Ex          Y      SBrkr</span></a>
<a class="sourceLine" id="cb4-60" data-line-number="60"><span class="co">#&gt;    1stFlrSF 2ndFlrSF LowQualFinSF GrLivArea BsmtFullBath BsmtHalfBath FullBath</span></a>
<a class="sourceLine" id="cb4-61" data-line-number="61"><span class="co">#&gt; 1:      856      854            0      1710            1            0        2</span></a>
<a class="sourceLine" id="cb4-62" data-line-number="62"><span class="co">#&gt; 2:     1262        0            0      1262            0            1        2</span></a>
<a class="sourceLine" id="cb4-63" data-line-number="63"><span class="co">#&gt; 3:      920      866            0      1786            1            0        2</span></a>
<a class="sourceLine" id="cb4-64" data-line-number="64"><span class="co">#&gt; 4:      961      756            0      1717            1            0        1</span></a>
<a class="sourceLine" id="cb4-65" data-line-number="65"><span class="co">#&gt; 5:     1145     1053            0      2198            1            0        2</span></a>
<a class="sourceLine" id="cb4-66" data-line-number="66"><span class="co">#&gt; 6:      796      566            0      1362            1            0        1</span></a>
<a class="sourceLine" id="cb4-67" data-line-number="67"><span class="co">#&gt;    HalfBath BedroomAbvGr KitchenAbvGr KitchenQual TotRmsAbvGrd Functional</span></a>
<a class="sourceLine" id="cb4-68" data-line-number="68"><span class="co">#&gt; 1:        1            3            1          Gd            8        Typ</span></a>
<a class="sourceLine" id="cb4-69" data-line-number="69"><span class="co">#&gt; 2:        0            3            1          TA            6        Typ</span></a>
<a class="sourceLine" id="cb4-70" data-line-number="70"><span class="co">#&gt; 3:        1            3            1          Gd            6        Typ</span></a>
<a class="sourceLine" id="cb4-71" data-line-number="71"><span class="co">#&gt; 4:        0            3            1          Gd            7        Typ</span></a>
<a class="sourceLine" id="cb4-72" data-line-number="72"><span class="co">#&gt; 5:        1            4            1          Gd            9        Typ</span></a>
<a class="sourceLine" id="cb4-73" data-line-number="73"><span class="co">#&gt; 6:        1            1            1          TA            5        Typ</span></a>
<a class="sourceLine" id="cb4-74" data-line-number="74"><span class="co">#&gt;    Fireplaces FireplaceQu GarageType GarageYrBlt GarageFinish GarageCars</span></a>
<a class="sourceLine" id="cb4-75" data-line-number="75"><span class="co">#&gt; 1:          0        &lt;NA&gt;     Attchd        2003          RFn          2</span></a>
<a class="sourceLine" id="cb4-76" data-line-number="76"><span class="co">#&gt; 2:          1          TA     Attchd        1976          RFn          2</span></a>
<a class="sourceLine" id="cb4-77" data-line-number="77"><span class="co">#&gt; 3:          1          TA     Attchd        2001          RFn          2</span></a>
<a class="sourceLine" id="cb4-78" data-line-number="78"><span class="co">#&gt; 4:          1          Gd     Detchd        1998          Unf          3</span></a>
<a class="sourceLine" id="cb4-79" data-line-number="79"><span class="co">#&gt; 5:          1          TA     Attchd        2000          RFn          3</span></a>
<a class="sourceLine" id="cb4-80" data-line-number="80"><span class="co">#&gt; 6:          0        &lt;NA&gt;     Attchd        1993          Unf          2</span></a>
<a class="sourceLine" id="cb4-81" data-line-number="81"><span class="co">#&gt;    GarageArea GarageQual GarageCond PavedDrive WoodDeckSF OpenPorchSF</span></a>
<a class="sourceLine" id="cb4-82" data-line-number="82"><span class="co">#&gt; 1:        548         TA         TA          Y          0          61</span></a>
<a class="sourceLine" id="cb4-83" data-line-number="83"><span class="co">#&gt; 2:        460         TA         TA          Y        298           0</span></a>
<a class="sourceLine" id="cb4-84" data-line-number="84"><span class="co">#&gt; 3:        608         TA         TA          Y          0          42</span></a>
<a class="sourceLine" id="cb4-85" data-line-number="85"><span class="co">#&gt; 4:        642         TA         TA          Y          0          35</span></a>
<a class="sourceLine" id="cb4-86" data-line-number="86"><span class="co">#&gt; 5:        836         TA         TA          Y        192          84</span></a>
<a class="sourceLine" id="cb4-87" data-line-number="87"><span class="co">#&gt; 6:        480         TA         TA          Y         40          30</span></a>
<a class="sourceLine" id="cb4-88" data-line-number="88"><span class="co">#&gt;    EnclosedPorch 3SsnPorch ScreenPorch PoolArea PoolQC Fence MiscFeature</span></a>
<a class="sourceLine" id="cb4-89" data-line-number="89"><span class="co">#&gt; 1:             0         0           0        0   &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-90" data-line-number="90"><span class="co">#&gt; 2:             0         0           0        0   &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-91" data-line-number="91"><span class="co">#&gt; 3:             0         0           0        0   &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-92" data-line-number="92"><span class="co">#&gt; 4:           272         0           0        0   &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-93" data-line-number="93"><span class="co">#&gt; 5:             0         0           0        0   &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-94" data-line-number="94"><span class="co">#&gt; 6:             0       320           0        0   &lt;NA&gt; MnPrv        Shed</span></a>
<a class="sourceLine" id="cb4-95" data-line-number="95"><span class="co">#&gt;    MiscVal MoSold YrSold SaleType SaleCondition SalePrice</span></a>
<a class="sourceLine" id="cb4-96" data-line-number="96"><span class="co">#&gt; 1:       0      2   2008       WD        Normal    208500</span></a>
<a class="sourceLine" id="cb4-97" data-line-number="97"><span class="co">#&gt; 2:       0      5   2007       WD        Normal    181500</span></a>
<a class="sourceLine" id="cb4-98" data-line-number="98"><span class="co">#&gt; 3:       0      9   2008       WD        Normal    223500</span></a>
<a class="sourceLine" id="cb4-99" data-line-number="99"><span class="co">#&gt; 4:       0      2   2006       WD       Abnorml    140000</span></a>
<a class="sourceLine" id="cb4-100" data-line-number="100"><span class="co">#&gt; 5:       0     12   2008       WD        Normal    250000</span></a>
<a class="sourceLine" id="cb4-101" data-line-number="101"><span class="co">#&gt; 6:     700     10   2009       WD        Normal    143000</span></a>
<a class="sourceLine" id="cb4-102" data-line-number="102"></a>
<a class="sourceLine" id="cb4-103" data-line-number="103">split &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(<span class="dt">y =</span> reg_train<span class="op">$</span>SalePrice, <span class="dt">p =</span> <span class="fl">0.7</span>)</a>
<a class="sourceLine" id="cb4-104" data-line-number="104">xtrain &lt;-<span class="st"> </span>reg_train[split<span class="op">$</span>Resample1]</a>
<a class="sourceLine" id="cb4-105" data-line-number="105">xtest &lt;-<span class="st"> </span>reg_train[<span class="op">!</span>split<span class="op">$</span>Resample1]</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># remove features with 90% or more missing values</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># we will also remove the Id column because it doesn't contain</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># any useful information</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">na_cols &lt;-<span class="st"> </span><span class="kw">colSums</span>(<span class="kw">is.na</span>(xtrain)) <span class="op">/</span><span class="st"> </span><span class="kw">nrow</span>(xtrain)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">na_cols &lt;-<span class="st"> </span><span class="kw">names</span>(na_cols[<span class="kw">which</span>(na_cols <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.9</span>)])</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">xtrain[, <span class="kw">c</span>(na_cols, <span class="st">&quot;Id&quot;</span>) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">xtest[, <span class="kw">c</span>(na_cols, <span class="st">&quot;Id&quot;</span>) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co"># encode categorical variables</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">cat_cols &lt;-<span class="st"> </span><span class="kw">names</span>(xtrain)[<span class="kw">sapply</span>(xtrain, is.character)]</a>
<a class="sourceLine" id="cb5-12" data-line-number="12"></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="cf">for</span>(c <span class="cf">in</span> cat_cols){</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">    lbl &lt;-<span class="st"> </span>LabelEncoder<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">    lbl<span class="op">$</span><span class="kw">fit</span>(<span class="kw">c</span>(xtrain[[c]], xtest[[c]]))</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">    xtrain[[c]] &lt;-<span class="st"> </span>lbl<span class="op">$</span><span class="kw">transform</span>(xtrain[[c]])</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">    xtest[[c]] &lt;-<span class="st"> </span>lbl<span class="op">$</span><span class="kw">transform</span>(xtest[[c]])</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">}</a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-55" data-line-number="55"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA' </span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56"><span class="co">#&gt; The data contains NA values. Imputing NA with 'NA'</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57"></a>
<a class="sourceLine" id="cb5-58" data-line-number="58"><span class="co"># removing noise column</span></a>
<a class="sourceLine" id="cb5-59" data-line-number="59">noise &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'GrLivArea'</span>,<span class="st">'TotalBsmtSF'</span>)</a>
<a class="sourceLine" id="cb5-60" data-line-number="60"></a>
<a class="sourceLine" id="cb5-61" data-line-number="61">xtrain[, <span class="kw">c</span>(noise) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</a>
<a class="sourceLine" id="cb5-62" data-line-number="62">xtest[, <span class="kw">c</span>(noise) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</a>
<a class="sourceLine" id="cb5-63" data-line-number="63"></a>
<a class="sourceLine" id="cb5-64" data-line-number="64"><span class="co"># fill missing value with  -1</span></a>
<a class="sourceLine" id="cb5-65" data-line-number="65">xtrain[<span class="kw">is.na</span>(xtrain)] &lt;-<span class="st"> </span><span class="dv">-1</span></a>
<a class="sourceLine" id="cb5-66" data-line-number="66">xtest[<span class="kw">is.na</span>(xtest)] &lt;-<span class="st"> </span><span class="dv">-1</span></a></code></pre></div>
<p><strong>KNN Regression</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">knn &lt;-<span class="st"> </span>KNNTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">k =</span> <span class="dv">2</span>,<span class="dt">prob =</span> T,<span class="dt">type =</span> <span class="st">'reg'</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">knn<span class="op">$</span><span class="kw">fit</span>(<span class="dt">train =</span> xtrain, <span class="dt">test =</span> xtest, <span class="dt">y =</span> <span class="st">'SalePrice'</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">probs &lt;-<span class="st"> </span>knn<span class="op">$</span><span class="kw">predict</span>(<span class="dt">type =</span> <span class="st">'prob'</span>)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">labels &lt;-<span class="st"> </span>knn<span class="op">$</span><span class="kw">predict</span>(<span class="dt">type=</span><span class="st">'raw'</span>)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted=</span>labels)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; [1] 48662.52</span></a></code></pre></div>
<p><strong>SVM Regression</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">svm &lt;-<span class="st"> </span>SVMTrainer<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">svm<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">'SalePrice'</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">pred &lt;-<span class="st"> </span>svm<span class="op">$</span><span class="kw">predict</span>(xtest)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> pred)</a></code></pre></div>
<p><strong>Simple Regresison</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family=</span><span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">lf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;SalePrice&quot;</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">summary</span>(lf<span class="op">$</span>model)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; stats::glm(formula = f, family = self$family, data = X, weights = self$weights)</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; Deviance Residuals: </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;     Min       1Q   Median       3Q      Max  </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; -338327   -14806    -1357    13406   264149  </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt;                 Estimate Std. Error t value Pr(&gt;|t|)    </span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; (Intercept)   -8.403e+05  1.649e+06  -0.510 0.610463    </span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; MSSubClass    -7.887e+01  5.723e+01  -1.378 0.168466    </span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt; MSZoning      -2.326e+03  1.835e+03  -1.267 0.205386    </span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co">#&gt; LotFrontage   -2.105e+01  3.450e+01  -0.610 0.542000    </span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="co">#&gt; LotArea        3.100e-01  1.683e-01   1.843 0.065696 .  </span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="co">#&gt; Street        -2.802e+04  1.772e+04  -1.581 0.114197    </span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="co">#&gt; LotShape      -3.803e+02  2.185e+03  -0.174 0.861871    </span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="co">#&gt; LandContour   -1.749e+03  1.815e+03  -0.964 0.335394    </span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="co">#&gt; Utilities     -6.236e+04  3.511e+04  -1.776 0.076056 .  </span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co">#&gt; LotConfig      2.268e+03  1.135e+03   1.998 0.046028 *  </span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="co">#&gt; LandSlope      1.197e+04  4.634e+03   2.582 0.009960 ** </span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="co">#&gt; Neighborhood  -5.439e+02  2.210e+02  -2.461 0.014023 *  </span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co">#&gt; Condition1    -3.171e+03  1.012e+03  -3.134 0.001778 ** </span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co">#&gt; Condition2    -1.546e+04  3.517e+03  -4.395 1.23e-05 ***</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">#&gt; BldgType      -2.900e+03  2.196e+03  -1.320 0.186987    </span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29"><span class="co">#&gt; HouseStyle    -6.204e+02  1.010e+03  -0.615 0.539028    </span></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="co">#&gt; OverallQual    1.531e+04  1.439e+03  10.643  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb8-31" data-line-number="31"><span class="co">#&gt; OverallCond    6.264e+03  1.281e+03   4.889 1.19e-06 ***</span></a>
<a class="sourceLine" id="cb8-32" data-line-number="32"><span class="co">#&gt; YearBuilt      3.986e+02  8.696e+01   4.584 5.16e-06 ***</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33"><span class="co">#&gt; YearRemodAdd   9.653e+01  8.274e+01   1.167 0.243654    </span></a>
<a class="sourceLine" id="cb8-34" data-line-number="34"><span class="co">#&gt; RoofStyle      5.483e+03  2.175e+03   2.521 0.011880 *  </span></a>
<a class="sourceLine" id="cb8-35" data-line-number="35"><span class="co">#&gt; RoofMatl      -1.585e+04  2.299e+03  -6.893 9.95e-12 ***</span></a>
<a class="sourceLine" id="cb8-36" data-line-number="36"><span class="co">#&gt; Exterior1st   -1.023e+03  7.264e+02  -1.408 0.159511    </span></a>
<a class="sourceLine" id="cb8-37" data-line-number="37"><span class="co">#&gt; Exterior2nd    8.290e+02  6.596e+02   1.257 0.209115    </span></a>
<a class="sourceLine" id="cb8-38" data-line-number="38"><span class="co">#&gt; MasVnrType     2.483e+03  1.725e+03   1.439 0.150353    </span></a>
<a class="sourceLine" id="cb8-39" data-line-number="39"><span class="co">#&gt; MasVnrArea     2.922e+01  7.096e+00   4.118 4.15e-05 ***</span></a>
<a class="sourceLine" id="cb8-40" data-line-number="40"><span class="co">#&gt; ExterQual     -5.428e+02  2.547e+03  -0.213 0.831317    </span></a>
<a class="sourceLine" id="cb8-41" data-line-number="41"><span class="co">#&gt; ExterCond      1.057e+03  2.615e+03   0.404 0.686263    </span></a>
<a class="sourceLine" id="cb8-42" data-line-number="42"><span class="co">#&gt; Foundation    -3.088e+03  2.012e+03  -1.534 0.125270    </span></a>
<a class="sourceLine" id="cb8-43" data-line-number="43"><span class="co">#&gt; BsmtQual       6.577e+03  1.581e+03   4.159 3.48e-05 ***</span></a>
<a class="sourceLine" id="cb8-44" data-line-number="44"><span class="co">#&gt; BsmtCond      -2.711e+03  2.021e+03  -1.341 0.180111    </span></a>
<a class="sourceLine" id="cb8-45" data-line-number="45"><span class="co">#&gt; BsmtExposure   1.313e+03  1.064e+03   1.234 0.217481    </span></a>
<a class="sourceLine" id="cb8-46" data-line-number="46"><span class="co">#&gt; BsmtFinType1  -1.137e+03  8.413e+02  -1.352 0.176684    </span></a>
<a class="sourceLine" id="cb8-47" data-line-number="47"><span class="co">#&gt; BsmtFinSF1     5.771e+00  6.016e+00   0.959 0.337663    </span></a>
<a class="sourceLine" id="cb8-48" data-line-number="48"><span class="co">#&gt; BsmtFinType2  -1.152e+03  1.091e+03  -1.056 0.291114    </span></a>
<a class="sourceLine" id="cb8-49" data-line-number="49"><span class="co">#&gt; BsmtFinSF2     1.731e+01  1.105e+01   1.567 0.117433    </span></a>
<a class="sourceLine" id="cb8-50" data-line-number="50"><span class="co">#&gt; BsmtUnfSF      1.516e+00  5.735e+00   0.264 0.791534    </span></a>
<a class="sourceLine" id="cb8-51" data-line-number="51"><span class="co">#&gt; Heating       -1.409e+03  3.400e+03  -0.414 0.678660    </span></a>
<a class="sourceLine" id="cb8-52" data-line-number="52"><span class="co">#&gt; HeatingQC     -1.390e+03  1.433e+03  -0.970 0.332129    </span></a>
<a class="sourceLine" id="cb8-53" data-line-number="53"><span class="co">#&gt; CentralAir     2.728e+03  5.508e+03   0.495 0.620461    </span></a>
<a class="sourceLine" id="cb8-54" data-line-number="54"><span class="co">#&gt; Electrical     3.957e+03  2.241e+03   1.766 0.077773 .  </span></a>
<a class="sourceLine" id="cb8-55" data-line-number="55"><span class="co">#&gt; `1stFlrSF`     5.947e+01  7.274e+00   8.176 9.36e-16 ***</span></a>
<a class="sourceLine" id="cb8-56" data-line-number="56"><span class="co">#&gt; `2ndFlrSF`     5.111e+01  6.069e+00   8.422  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb8-57" data-line-number="57"><span class="co">#&gt; LowQualFinSF  -1.606e+00  2.944e+01  -0.055 0.956526    </span></a>
<a class="sourceLine" id="cb8-58" data-line-number="58"><span class="co">#&gt; BsmtFullBath   1.121e+04  3.063e+03   3.659 0.000267 ***</span></a>
<a class="sourceLine" id="cb8-59" data-line-number="59"><span class="co">#&gt; BsmtHalfBath   4.686e+03  4.621e+03   1.014 0.310817    </span></a>
<a class="sourceLine" id="cb8-60" data-line-number="60"><span class="co">#&gt; FullBath       6.199e+03  3.298e+03   1.879 0.060511 .  </span></a>
<a class="sourceLine" id="cb8-61" data-line-number="61"><span class="co">#&gt; HalfBath      -1.834e+03  3.089e+03  -0.594 0.552889    </span></a>
<a class="sourceLine" id="cb8-62" data-line-number="62"><span class="co">#&gt; BedroomAbvGr  -7.087e+03  1.972e+03  -3.594 0.000343 ***</span></a>
<a class="sourceLine" id="cb8-63" data-line-number="63"><span class="co">#&gt; KitchenAbvGr  -1.891e+04  5.937e+03  -3.185 0.001494 ** </span></a>
<a class="sourceLine" id="cb8-64" data-line-number="64"><span class="co">#&gt; KitchenQual    9.122e+03  1.595e+03   5.719 1.44e-08 ***</span></a>
<a class="sourceLine" id="cb8-65" data-line-number="65"><span class="co">#&gt; TotRmsAbvGrd   2.779e+03  1.452e+03   1.914 0.055896 .  </span></a>
<a class="sourceLine" id="cb8-66" data-line-number="66"><span class="co">#&gt; Functional    -4.440e+03  1.601e+03  -2.774 0.005647 ** </span></a>
<a class="sourceLine" id="cb8-67" data-line-number="67"><span class="co">#&gt; Fireplaces    -1.103e+03  2.680e+03  -0.412 0.680682    </span></a>
<a class="sourceLine" id="cb8-68" data-line-number="68"><span class="co">#&gt; FireplaceQu    3.605e+03  1.440e+03   2.504 0.012460 *  </span></a>
<a class="sourceLine" id="cb8-69" data-line-number="69"><span class="co">#&gt; GarageType    -3.729e+01  1.167e+03  -0.032 0.974509    </span></a>
<a class="sourceLine" id="cb8-70" data-line-number="70"><span class="co">#&gt; GarageYrBlt   -1.006e+01  6.902e+00  -1.458 0.145093    </span></a>
<a class="sourceLine" id="cb8-71" data-line-number="71"><span class="co">#&gt; GarageFinish   6.266e+02  1.560e+03   0.402 0.688096    </span></a>
<a class="sourceLine" id="cb8-72" data-line-number="72"><span class="co">#&gt; GarageCars     1.598e+04  3.539e+03   4.516 7.10e-06 ***</span></a>
<a class="sourceLine" id="cb8-73" data-line-number="73"><span class="co">#&gt; GarageArea    -5.789e+00  1.199e+01  -0.483 0.629460    </span></a>
<a class="sourceLine" id="cb8-74" data-line-number="74"><span class="co">#&gt; GarageQual     1.132e+03  4.160e+03   0.272 0.785537    </span></a>
<a class="sourceLine" id="cb8-75" data-line-number="75"><span class="co">#&gt; GarageCond    -1.720e+03  2.300e+03  -0.748 0.454730    </span></a>
<a class="sourceLine" id="cb8-76" data-line-number="76"><span class="co">#&gt; PavedDrive    -7.645e+02  3.137e+03  -0.244 0.807503    </span></a>
<a class="sourceLine" id="cb8-77" data-line-number="77"><span class="co">#&gt; WoodDeckSF     2.180e+01  9.438e+00   2.310 0.021095 *  </span></a>
<a class="sourceLine" id="cb8-78" data-line-number="78"><span class="co">#&gt; OpenPorchSF   -9.759e+00  1.843e+01  -0.529 0.596665    </span></a>
<a class="sourceLine" id="cb8-79" data-line-number="79"><span class="co">#&gt; EnclosedPorch  1.735e+01  1.979e+01   0.877 0.380947    </span></a>
<a class="sourceLine" id="cb8-80" data-line-number="80"><span class="co">#&gt; `3SsnPorch`    2.172e+00  3.562e+01   0.061 0.951392    </span></a>
<a class="sourceLine" id="cb8-81" data-line-number="81"><span class="co">#&gt; ScreenPorch    5.565e+01  2.067e+01   2.692 0.007234 ** </span></a>
<a class="sourceLine" id="cb8-82" data-line-number="82"><span class="co">#&gt; PoolArea      -3.991e+01  3.487e+01  -1.144 0.252723    </span></a>
<a class="sourceLine" id="cb8-83" data-line-number="83"><span class="co">#&gt; Fence         -2.484e+03  1.490e+03  -1.667 0.095834 .  </span></a>
<a class="sourceLine" id="cb8-84" data-line-number="84"><span class="co">#&gt; MiscVal        6.502e+00  4.441e+00   1.464 0.143447    </span></a>
<a class="sourceLine" id="cb8-85" data-line-number="85"><span class="co">#&gt; MoSold        -3.681e+01  3.896e+02  -0.094 0.924751    </span></a>
<a class="sourceLine" id="cb8-86" data-line-number="86"><span class="co">#&gt; YrSold        -9.048e+01  8.216e+02  -0.110 0.912340    </span></a>
<a class="sourceLine" id="cb8-87" data-line-number="87"><span class="co">#&gt; SaleType       3.043e+03  1.341e+03   2.269 0.023488 *  </span></a>
<a class="sourceLine" id="cb8-88" data-line-number="88"><span class="co">#&gt; SaleCondition -1.317e+03  1.400e+03  -0.941 0.347007    </span></a>
<a class="sourceLine" id="cb8-89" data-line-number="89"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb8-90" data-line-number="90"><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></a>
<a class="sourceLine" id="cb8-91" data-line-number="91"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-92" data-line-number="92"><span class="co">#&gt; (Dispersion parameter for gaussian family taken to be 1064227128)</span></a>
<a class="sourceLine" id="cb8-93" data-line-number="93"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-94" data-line-number="94"><span class="co">#&gt;     Null deviance: 6.6216e+12  on 1023  degrees of freedom</span></a>
<a class="sourceLine" id="cb8-95" data-line-number="95"><span class="co">#&gt; Residual deviance: 1.0100e+12  on  949  degrees of freedom</span></a>
<a class="sourceLine" id="cb8-96" data-line-number="96"><span class="co">#&gt; AIC: 24264</span></a>
<a class="sourceLine" id="cb8-97" data-line-number="97"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-98" data-line-number="98"><span class="co">#&gt; Number of Fisher Scoring iterations: 2</span></a>
<a class="sourceLine" id="cb8-99" data-line-number="99">predictions &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb8-100" data-line-number="100"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> predictions)</a>
<a class="sourceLine" id="cb8-101" data-line-number="101"><span class="co">#&gt; [1] 32211.9</span></a></code></pre></div>
<p><strong>Lasso Regression</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="dt">alpha =</span> <span class="dv">1</span>, <span class="dt">lambda =</span> <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">lf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;SalePrice&quot;</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">predictions &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> predictions)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; [1] 37490.75</span></a></code></pre></div>
<p><strong>Ridge Regression</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="dt">alpha=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">lf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;SalePrice&quot;</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">predictions &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> predictions)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; [1] 37519.78</span></a></code></pre></div>
<p><strong>Logistic Regression with CV</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">lf<span class="op">$</span><span class="kw">cv_model</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">'SalePrice'</span>, <span class="dt">nfolds =</span> <span class="dv">5</span>, <span class="dt">parallel =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">predictions &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">cv_predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">coefs &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">get_importance</span>()</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> predictions)</a></code></pre></div>
<p><strong>Random Forest</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">rf &lt;-<span class="st"> </span>RFTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">n_estimators =</span> <span class="dv">500</span>,<span class="dt">classification =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">rf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;SalePrice&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">pred &lt;-<span class="st"> </span>rf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">rf<span class="op">$</span><span class="kw">get_importance</span>()</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;               tmp.order.tmp..decreasing...TRUE..</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; OverallQual                         843528867996</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; GarageCars                          541332222299</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; 1stFlrSF                            483318749419</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; GarageArea                          473506726377</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; YearBuilt                           383509412736</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; GarageYrBlt                         292494440939</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; 2ndFlrSF                            245273696373</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; BsmtFinSF1                          236385559010</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; FullBath                            235657120093</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; TotRmsAbvGrd                        204160296183</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; YearRemodAdd                        199854187618</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; KitchenQual                         192826779801</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; LotArea                             167638537104</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt; ExterQual                           165651128526</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt; MasVnrArea                          164778221394</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt; Fireplaces                          157096715586</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; FireplaceQu                         137297641709</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt; BsmtQual                            121920438920</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="co">#&gt; OpenPorchSF                         120841460753</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">#&gt; LotFrontage                         118101178039</span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="co">#&gt; Foundation                          103990733529</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="co">#&gt; WoodDeckSF                           69848765508</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="co">#&gt; Neighborhood                         67261100945</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="co">#&gt; BsmtUnfSF                            62919521322</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="co">#&gt; BedroomAbvGr                         52860306010</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="co">#&gt; BsmtFinType1                         51982234371</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="co">#&gt; HeatingQC                            50189063151</span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33"><span class="co">#&gt; GarageType                           48044355273</span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34"><span class="co">#&gt; Exterior2nd                          42596379941</span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35"><span class="co">#&gt; MoSold                               40062903329</span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36"><span class="co">#&gt; MSSubClass                           39564307015</span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37"><span class="co">#&gt; OverallCond                          32754782066</span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38"><span class="co">#&gt; Exterior1st                          31737713942</span></a>
<a class="sourceLine" id="cb12-39" data-line-number="39"><span class="co">#&gt; RoofStyle                            29179553505</span></a>
<a class="sourceLine" id="cb12-40" data-line-number="40"><span class="co">#&gt; HalfBath                             25624426339</span></a>
<a class="sourceLine" id="cb12-41" data-line-number="41"><span class="co">#&gt; PoolArea                             24774423758</span></a>
<a class="sourceLine" id="cb12-42" data-line-number="42"><span class="co">#&gt; HouseStyle                           23762558236</span></a>
<a class="sourceLine" id="cb12-43" data-line-number="43"><span class="co">#&gt; YrSold                               22444732721</span></a>
<a class="sourceLine" id="cb12-44" data-line-number="44"><span class="co">#&gt; BsmtFullBath                         22260611232</span></a>
<a class="sourceLine" id="cb12-45" data-line-number="45"><span class="co">#&gt; GarageFinish                         22137108912</span></a>
<a class="sourceLine" id="cb12-46" data-line-number="46"><span class="co">#&gt; LotShape                             20767075998</span></a>
<a class="sourceLine" id="cb12-47" data-line-number="47"><span class="co">#&gt; BsmtExposure                         17364314649</span></a>
<a class="sourceLine" id="cb12-48" data-line-number="48"><span class="co">#&gt; SaleCondition                        16866276843</span></a>
<a class="sourceLine" id="cb12-49" data-line-number="49"><span class="co">#&gt; RoofMatl                             15874497235</span></a>
<a class="sourceLine" id="cb12-50" data-line-number="50"><span class="co">#&gt; MasVnrType                           15852982148</span></a>
<a class="sourceLine" id="cb12-51" data-line-number="51"><span class="co">#&gt; Fence                                15453138099</span></a>
<a class="sourceLine" id="cb12-52" data-line-number="52"><span class="co">#&gt; CentralAir                           14327658513</span></a>
<a class="sourceLine" id="cb12-53" data-line-number="53"><span class="co">#&gt; LotConfig                            13549635384</span></a>
<a class="sourceLine" id="cb12-54" data-line-number="54"><span class="co">#&gt; SaleType                             13508654676</span></a>
<a class="sourceLine" id="cb12-55" data-line-number="55"><span class="co">#&gt; MSZoning                             13498853944</span></a>
<a class="sourceLine" id="cb12-56" data-line-number="56"><span class="co">#&gt; ScreenPorch                          13397400798</span></a>
<a class="sourceLine" id="cb12-57" data-line-number="57"><span class="co">#&gt; LandContour                          13319110213</span></a>
<a class="sourceLine" id="cb12-58" data-line-number="58"><span class="co">#&gt; BldgType                             12867140545</span></a>
<a class="sourceLine" id="cb12-59" data-line-number="59"><span class="co">#&gt; EnclosedPorch                        11296479669</span></a>
<a class="sourceLine" id="cb12-60" data-line-number="60"><span class="co">#&gt; BsmtHalfBath                          9688039829</span></a>
<a class="sourceLine" id="cb12-61" data-line-number="61"><span class="co">#&gt; KitchenAbvGr                          9584674634</span></a>
<a class="sourceLine" id="cb12-62" data-line-number="62"><span class="co">#&gt; Condition1                            8747947235</span></a>
<a class="sourceLine" id="cb12-63" data-line-number="63"><span class="co">#&gt; ExterCond                             8169124003</span></a>
<a class="sourceLine" id="cb12-64" data-line-number="64"><span class="co">#&gt; BsmtFinSF2                            7683805820</span></a>
<a class="sourceLine" id="cb12-65" data-line-number="65"><span class="co">#&gt; BsmtCond                              7619078071</span></a>
<a class="sourceLine" id="cb12-66" data-line-number="66"><span class="co">#&gt; GarageQual                            7562150192</span></a>
<a class="sourceLine" id="cb12-67" data-line-number="67"><span class="co">#&gt; BsmtFinType2                          6735314538</span></a>
<a class="sourceLine" id="cb12-68" data-line-number="68"><span class="co">#&gt; GarageCond                            6672057801</span></a>
<a class="sourceLine" id="cb12-69" data-line-number="69"><span class="co">#&gt; LandSlope                             6584672331</span></a>
<a class="sourceLine" id="cb12-70" data-line-number="70"><span class="co">#&gt; Electrical                            5399227197</span></a>
<a class="sourceLine" id="cb12-71" data-line-number="71"><span class="co">#&gt; PavedDrive                            4501353384</span></a>
<a class="sourceLine" id="cb12-72" data-line-number="72"><span class="co">#&gt; Functional                            4190006815</span></a>
<a class="sourceLine" id="cb12-73" data-line-number="73"><span class="co">#&gt; Condition2                            2195681528</span></a>
<a class="sourceLine" id="cb12-74" data-line-number="74"><span class="co">#&gt; MiscVal                               1928894547</span></a>
<a class="sourceLine" id="cb12-75" data-line-number="75"><span class="co">#&gt; Heating                               1569086808</span></a>
<a class="sourceLine" id="cb12-76" data-line-number="76"><span class="co">#&gt; 3SsnPorch                             1480581688</span></a>
<a class="sourceLine" id="cb12-77" data-line-number="77"><span class="co">#&gt; LowQualFinSF                          1056659610</span></a>
<a class="sourceLine" id="cb12-78" data-line-number="78"><span class="co">#&gt; Street                                 438834513</span></a>
<a class="sourceLine" id="cb12-79" data-line-number="79"><span class="co">#&gt; Utilities                               88330013</span></a>
<a class="sourceLine" id="cb12-80" data-line-number="80"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> pred)</a>
<a class="sourceLine" id="cb12-81" data-line-number="81"><span class="co">#&gt; [1] 30455</span></a></code></pre></div>
<p><strong>Xgboost</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">xgb &lt;-<span class="st"> </span>XGBTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">objective =</span> <span class="st">&quot;reg:linear&quot;</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">                      , <span class="dt">n_estimators =</span> <span class="dv">500</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">                      , <span class="dt">eval_metric =</span> <span class="st">&quot;rmse&quot;</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">                      , <span class="dt">maximize =</span> F</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">                      , <span class="dt">learning_rate =</span> <span class="fl">0.1</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6">                      ,<span class="dt">max_depth =</span> <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">xgb<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;SalePrice&quot;</span>, <span class="dt">valid =</span> xtest)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; [12:05:55] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; [12:05:55] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt; [1]  train-rmse:179540.272230    val-rmse:177816.924029 </span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co">#&gt; Multiple eval metrics are present. Will use val_rmse for early stopping.</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="co">#&gt; Will train until val_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="co">#&gt; [51] train-rmse:8043.020532  val-rmse:29194.076697 </span></a>
<a class="sourceLine" id="cb13-24" data-line-number="24"><span class="co">#&gt; [101]    train-rmse:4690.059726  val-rmse:28389.852039 </span></a>
<a class="sourceLine" id="cb13-25" data-line-number="25"><span class="co">#&gt; [151]    train-rmse:3046.429187  val-rmse:28202.642311 </span></a>
<a class="sourceLine" id="cb13-26" data-line-number="26"><span class="co">#&gt; [201]    train-rmse:2076.870140  val-rmse:28066.442911 </span></a>
<a class="sourceLine" id="cb13-27" data-line-number="27"><span class="co">#&gt; [251]    train-rmse:1405.456004  val-rmse:27995.566795 </span></a>
<a class="sourceLine" id="cb13-28" data-line-number="28"><span class="co">#&gt; Stopping. Best iteration:</span></a>
<a class="sourceLine" id="cb13-29" data-line-number="29"><span class="co">#&gt; [237]    train-rmse:1561.653431  val-rmse:27994.376286</span></a>
<a class="sourceLine" id="cb13-30" data-line-number="30">pred &lt;-<span class="st"> </span>xgb<span class="op">$</span><span class="kw">predict</span>(xtest)</a>
<a class="sourceLine" id="cb13-31" data-line-number="31"><span class="kw">rmse</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>SalePrice, <span class="dt">predicted =</span> pred)</a>
<a class="sourceLine" id="cb13-32" data-line-number="32"><span class="co">#&gt; [1] 27994.38</span></a></code></pre></div>
<p><strong>Grid Search</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">xgb &lt;-<span class="st"> </span>XGBTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">objective =</span> <span class="st">&quot;reg:linear&quot;</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">gst &lt;-<span class="st"> </span>GridSearchCV<span class="op">$</span><span class="kw">new</span>(<span class="dt">trainer =</span> xgb,</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">                             <span class="dt">parameters =</span> <span class="kw">list</span>(<span class="dt">n_estimators =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">50</span>), <span class="dt">max_depth =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">                             <span class="dt">n_folds =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">                             <span class="dt">scoring =</span> <span class="kw">c</span>(<span class="st">'accuracy'</span>,<span class="st">'auc'</span>))</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">gst<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">&quot;SalePrice&quot;</span>)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; [1] &quot;entering grid search&quot;</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt; [1] &quot;In total, 4 models will be trained&quot;</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; [12:05:56] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; [12:05:56] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt; [1]  train-rmse:143834.662493 </span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt; [10] train-rmse:16183.222568</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">#&gt; [12:05:56] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">#&gt; [12:05:56] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-29" data-line-number="29"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-30" data-line-number="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-31" data-line-number="31"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-32" data-line-number="32"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-33" data-line-number="33"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-34" data-line-number="34"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-35" data-line-number="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-36" data-line-number="36"><span class="co">#&gt; [1]  train-rmse:140929.342988 </span></a>
<a class="sourceLine" id="cb14-37" data-line-number="37"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-38" data-line-number="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-39" data-line-number="39"><span class="co">#&gt; [10] train-rmse:15550.145000</span></a>
<a class="sourceLine" id="cb14-40" data-line-number="40"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-41" data-line-number="41"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-42" data-line-number="42"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-43" data-line-number="43"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-44" data-line-number="44"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-45" data-line-number="45"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-46" data-line-number="46"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-47" data-line-number="47"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-48" data-line-number="48"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-49" data-line-number="49"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-50" data-line-number="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-51" data-line-number="51"><span class="co">#&gt; [1]  train-rmse:143251.233056 </span></a>
<a class="sourceLine" id="cb14-52" data-line-number="52"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-53" data-line-number="53"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-54" data-line-number="54"><span class="co">#&gt; [10] train-rmse:16330.818909</span></a>
<a class="sourceLine" id="cb14-55" data-line-number="55"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-56" data-line-number="56"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-57" data-line-number="57"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-58" data-line-number="58"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-59" data-line-number="59"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-60" data-line-number="60"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-61" data-line-number="61"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-62" data-line-number="62"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-63" data-line-number="63"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-64" data-line-number="64"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-65" data-line-number="65"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-66" data-line-number="66"><span class="co">#&gt; [1]  train-rmse:143834.662493 </span></a>
<a class="sourceLine" id="cb14-67" data-line-number="67"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-68" data-line-number="68"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-69" data-line-number="69"><span class="co">#&gt; [50] train-rmse:3819.400511</span></a>
<a class="sourceLine" id="cb14-70" data-line-number="70"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-71" data-line-number="71"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-72" data-line-number="72"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-73" data-line-number="73"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-74" data-line-number="74"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-75" data-line-number="75"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-76" data-line-number="76"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-77" data-line-number="77"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-78" data-line-number="78"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-79" data-line-number="79"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-80" data-line-number="80"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-81" data-line-number="81"><span class="co">#&gt; [1]  train-rmse:140929.342988 </span></a>
<a class="sourceLine" id="cb14-82" data-line-number="82"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-83" data-line-number="83"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-84" data-line-number="84"><span class="co">#&gt; [50] train-rmse:3905.734710</span></a>
<a class="sourceLine" id="cb14-85" data-line-number="85"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-86" data-line-number="86"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-87" data-line-number="87"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-88" data-line-number="88"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-89" data-line-number="89"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-90" data-line-number="90"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-91" data-line-number="91"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-92" data-line-number="92"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-93" data-line-number="93"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-94" data-line-number="94"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-95" data-line-number="95"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-96" data-line-number="96"><span class="co">#&gt; [1]  train-rmse:143251.233056 </span></a>
<a class="sourceLine" id="cb14-97" data-line-number="97"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-98" data-line-number="98"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-99" data-line-number="99"><span class="co">#&gt; [50] train-rmse:3718.327761</span></a>
<a class="sourceLine" id="cb14-100" data-line-number="100"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-101" data-line-number="101"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-102" data-line-number="102"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-103" data-line-number="103"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-104" data-line-number="104"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-105" data-line-number="105"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-106" data-line-number="106"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-107" data-line-number="107"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-108" data-line-number="108"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-109" data-line-number="109"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-110" data-line-number="110"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-111" data-line-number="111"><span class="co">#&gt; [1]  train-rmse:144732.651251 </span></a>
<a class="sourceLine" id="cb14-112" data-line-number="112"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-113" data-line-number="113"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-114" data-line-number="114"><span class="co">#&gt; [10] train-rmse:32563.362240</span></a>
<a class="sourceLine" id="cb14-115" data-line-number="115"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-116" data-line-number="116"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-117" data-line-number="117"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-118" data-line-number="118"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-119" data-line-number="119"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-120" data-line-number="120"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-121" data-line-number="121"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-122" data-line-number="122"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-123" data-line-number="123"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-124" data-line-number="124"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-125" data-line-number="125"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-126" data-line-number="126"><span class="co">#&gt; [1]  train-rmse:141943.965863 </span></a>
<a class="sourceLine" id="cb14-127" data-line-number="127"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-128" data-line-number="128"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-129" data-line-number="129"><span class="co">#&gt; [10] train-rmse:31118.978041</span></a>
<a class="sourceLine" id="cb14-130" data-line-number="130"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-131" data-line-number="131"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-132" data-line-number="132"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-133" data-line-number="133"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-134" data-line-number="134"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-135" data-line-number="135"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-136" data-line-number="136"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-137" data-line-number="137"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-138" data-line-number="138"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-139" data-line-number="139"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-140" data-line-number="140"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-141" data-line-number="141"><span class="co">#&gt; [1]  train-rmse:144076.337327 </span></a>
<a class="sourceLine" id="cb14-142" data-line-number="142"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-143" data-line-number="143"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-144" data-line-number="144"><span class="co">#&gt; [10] train-rmse:27683.098538</span></a>
<a class="sourceLine" id="cb14-145" data-line-number="145"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-146" data-line-number="146"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-147" data-line-number="147"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-148" data-line-number="148"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-149" data-line-number="149"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-150" data-line-number="150"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-151" data-line-number="151"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-152" data-line-number="152"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-153" data-line-number="153"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-154" data-line-number="154"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-155" data-line-number="155"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-156" data-line-number="156"><span class="co">#&gt; [1]  train-rmse:144732.651251 </span></a>
<a class="sourceLine" id="cb14-157" data-line-number="157"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-158" data-line-number="158"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-159" data-line-number="159"><span class="co">#&gt; [50] train-rmse:17622.435150</span></a>
<a class="sourceLine" id="cb14-160" data-line-number="160"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-161" data-line-number="161"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-162" data-line-number="162"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-163" data-line-number="163"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-164" data-line-number="164"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-165" data-line-number="165"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-166" data-line-number="166"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-167" data-line-number="167"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-168" data-line-number="168"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-169" data-line-number="169"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-170" data-line-number="170"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-171" data-line-number="171"><span class="co">#&gt; [1]  train-rmse:141943.965863 </span></a>
<a class="sourceLine" id="cb14-172" data-line-number="172"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-173" data-line-number="173"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-174" data-line-number="174"><span class="co">#&gt; [50] train-rmse:16389.178107</span></a>
<a class="sourceLine" id="cb14-175" data-line-number="175"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb14-176" data-line-number="176"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb14-177" data-line-number="177"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/objective/regression_obj.cu:203: reg:linear is now deprecated in favor of reg:squarederror.</span></a>
<a class="sourceLine" id="cb14-178" data-line-number="178"><span class="co">#&gt; [12:05:57] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb14-179" data-line-number="179"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb14-180" data-line-number="180"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-181" data-line-number="181"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb14-182" data-line-number="182"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb14-183" data-line-number="183"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb14-184" data-line-number="184"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-185" data-line-number="185"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-186" data-line-number="186"><span class="co">#&gt; [1]  train-rmse:144076.337327 </span></a>
<a class="sourceLine" id="cb14-187" data-line-number="187"><span class="co">#&gt; Will train until train_rmse hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb14-188" data-line-number="188"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-189" data-line-number="189"><span class="co">#&gt; [50] train-rmse:15743.306882</span></a>
<a class="sourceLine" id="cb14-190" data-line-number="190">gst<span class="op">$</span><span class="kw">best_iteration</span>()</a>
<a class="sourceLine" id="cb14-191" data-line-number="191"><span class="co">#&gt; $n_estimators</span></a>
<a class="sourceLine" id="cb14-192" data-line-number="192"><span class="co">#&gt; [1] 10</span></a>
<a class="sourceLine" id="cb14-193" data-line-number="193"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-194" data-line-number="194"><span class="co">#&gt; $max_depth</span></a>
<a class="sourceLine" id="cb14-195" data-line-number="195"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb14-196" data-line-number="196"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-197" data-line-number="197"><span class="co">#&gt; $accuracy_avg</span></a>
<a class="sourceLine" id="cb14-198" data-line-number="198"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb14-199" data-line-number="199"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-200" data-line-number="200"><span class="co">#&gt; $accuracy_sd</span></a>
<a class="sourceLine" id="cb14-201" data-line-number="201"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb14-202" data-line-number="202"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-203" data-line-number="203"><span class="co">#&gt; $auc_avg</span></a>
<a class="sourceLine" id="cb14-204" data-line-number="204"><span class="co">#&gt; [1] NaN</span></a>
<a class="sourceLine" id="cb14-205" data-line-number="205"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-206" data-line-number="206"><span class="co">#&gt; $auc_sd</span></a>
<a class="sourceLine" id="cb14-207" data-line-number="207"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
<p><strong>Random Search</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">rf &lt;-<span class="st"> </span>RFTrainer<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">rst &lt;-<span class="st"> </span>RandomSearchCV<span class="op">$</span><span class="kw">new</span>(<span class="dt">trainer =</span> rf,</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">                             <span class="dt">parameters =</span> <span class="kw">list</span>(<span class="dt">n_estimators =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">                             <span class="dt">max_depth =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">                             <span class="dt">n_folds =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">                             <span class="dt">scoring =</span> <span class="kw">c</span>(<span class="st">'accuracy'</span>,<span class="st">'auc'</span>),</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">                             <span class="dt">n_iter =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">rst<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">&quot;SalePrice&quot;</span>)</a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; [1] &quot;In total, 3 models will be trained&quot;</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10">rst<span class="op">$</span><span class="kw">best_iteration</span>()</a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt; $n_estimators</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; $max_depth</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; [1] 2</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; $accuracy_avg</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt; [1] 0.01074421</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt; $accuracy_sd</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt; [1] 0.003393777</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt; $auc_avg</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt; [1] NaN</span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">#&gt; $auc_sd</span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
</div>
<div id="binary-classification-data" class="section level3">
<h3>Binary Classification Data</h3>
<p>Here, we will solve a simple binary classification problem (predict people who survived on titanic ship). The idea here is to demonstrate how to use this package to solve classification problems.</p>
<p><strong>Data Preparation</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># load class</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">load</span>(<span class="st">'../data/cla_train.rda'</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co"># if the above doesn't work, you can try: load(&quot;cla_train.rda&quot;)</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="kw">head</span>(cla_train)</a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt;    PassengerId Survived Pclass</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; 1:           1        0      3</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; 2:           2        1      1</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; 3:           3        1      3</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; 4:           4        1      1</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt; 5:           5        0      3</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt; 6:           6        0      3</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt;                                                   Name    Sex Age SibSp Parch</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt; 1:                             Braund, Mr. Owen Harris   male  22     1     0</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt; 2: Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt; 3:                              Heikkinen, Miss. Laina female  26     0     0</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt; 4:        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt; 5:                            Allen, Mr. William Henry   male  35     0     0</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; 6:                                    Moran, Mr. James   male  NA     0     0</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt;              Ticket    Fare Cabin Embarked</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="co">#&gt; 1:        A/5 21171  7.2500              S</span></a>
<a class="sourceLine" id="cb16-22" data-line-number="22"><span class="co">#&gt; 2:         PC 17599 71.2833   C85        C</span></a>
<a class="sourceLine" id="cb16-23" data-line-number="23"><span class="co">#&gt; 3: STON/O2. 3101282  7.9250              S</span></a>
<a class="sourceLine" id="cb16-24" data-line-number="24"><span class="co">#&gt; 4:           113803 53.1000  C123        S</span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25"><span class="co">#&gt; 5:           373450  8.0500              S</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26"><span class="co">#&gt; 6:           330877  8.4583              Q</span></a>
<a class="sourceLine" id="cb16-27" data-line-number="27"></a>
<a class="sourceLine" id="cb16-28" data-line-number="28"><span class="co"># split the data</span></a>
<a class="sourceLine" id="cb16-29" data-line-number="29">split &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(<span class="dt">y =</span> cla_train<span class="op">$</span>Survived,<span class="dt">p =</span> <span class="fl">0.7</span>)</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">xtrain &lt;-<span class="st"> </span>cla_train[split<span class="op">$</span>Resample1]</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">xtest &lt;-<span class="st"> </span>cla_train[<span class="op">!</span>split<span class="op">$</span>Resample1]</a>
<a class="sourceLine" id="cb16-32" data-line-number="32"></a>
<a class="sourceLine" id="cb16-33" data-line-number="33"><span class="co"># encode categorical variables - shorter way</span></a>
<a class="sourceLine" id="cb16-34" data-line-number="34"><span class="cf">for</span>(c <span class="cf">in</span> <span class="kw">c</span>(<span class="st">'Embarked'</span>,<span class="st">'Sex'</span>,<span class="st">'Cabin'</span>)) {</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">    lbl &lt;-<span class="st"> </span>LabelEncoder<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">    lbl<span class="op">$</span><span class="kw">fit</span>(<span class="kw">c</span>(xtrain[[c]], xtest[[c]]))</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">    xtrain[[c]] &lt;-<span class="st"> </span>lbl<span class="op">$</span><span class="kw">transform</span>(xtrain[[c]])</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">    xtest[[c]] &lt;-<span class="st"> </span>lbl<span class="op">$</span><span class="kw">transform</span>(xtest[[c]])</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">}</a>
<a class="sourceLine" id="cb16-40" data-line-number="40"><span class="co">#&gt; The data contains blank values. Imputing them with 'NA' </span></a>
<a class="sourceLine" id="cb16-41" data-line-number="41"><span class="co">#&gt; The data contains blank values. Imputing them with 'NA' </span></a>
<a class="sourceLine" id="cb16-42" data-line-number="42"><span class="co">#&gt; The data contains blank values. Imputing them with 'NA' </span></a>
<a class="sourceLine" id="cb16-43" data-line-number="43"><span class="co">#&gt; The data contains blank values. Imputing them with 'NA' </span></a>
<a class="sourceLine" id="cb16-44" data-line-number="44"><span class="co">#&gt; The data contains blank values. Imputing them with 'NA'</span></a>
<a class="sourceLine" id="cb16-45" data-line-number="45"></a>
<a class="sourceLine" id="cb16-46" data-line-number="46"><span class="co"># impute missing values</span></a>
<a class="sourceLine" id="cb16-47" data-line-number="47">xtrain[, Age <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">replace</span>(Age, <span class="kw">is.na</span>(Age), <span class="kw">median</span>(Age, <span class="dt">na.rm =</span> T))]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">xtest[, Age <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">replace</span>(Age, <span class="kw">is.na</span>(Age), <span class="kw">median</span>(Age, <span class="dt">na.rm =</span> T))]</a>
<a class="sourceLine" id="cb16-49" data-line-number="49"></a>
<a class="sourceLine" id="cb16-50" data-line-number="50"><span class="co"># drop these features</span></a>
<a class="sourceLine" id="cb16-51" data-line-number="51">to_drop &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'PassengerId'</span>,<span class="st">'Ticket'</span>,<span class="st">'Name'</span>)</a>
<a class="sourceLine" id="cb16-52" data-line-number="52"></a>
<a class="sourceLine" id="cb16-53" data-line-number="53">xtrain &lt;-<span class="st"> </span>xtrain[,<span class="op">-</span><span class="kw">c</span>(to_drop), with=F]</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">xtest &lt;-<span class="st"> </span>xtest[,<span class="op">-</span><span class="kw">c</span>(to_drop), with=F]</a></code></pre></div>
<p>Now, our data is ready to be served for model training. Let’s do it.</p>
<p><strong>KNN Classification</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">knn &lt;-<span class="st"> </span>KNNTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">k =</span> <span class="dv">2</span>,<span class="dt">prob =</span> T,<span class="dt">type =</span> <span class="st">'class'</span>)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">knn<span class="op">$</span><span class="kw">fit</span>(<span class="dt">train =</span> xtrain, <span class="dt">test =</span> xtest, <span class="dt">y =</span> <span class="st">'Survived'</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">probs &lt;-<span class="st"> </span>knn<span class="op">$</span><span class="kw">predict</span>(<span class="dt">type =</span> <span class="st">'prob'</span>)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">labels &lt;-<span class="st"> </span>knn<span class="op">$</span><span class="kw">predict</span>(<span class="dt">type =</span> <span class="st">'raw'</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> labels)</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; [1] 0.6385027</span></a></code></pre></div>
<p><strong>Naive Bayes Classification</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">nb &lt;-<span class="st"> </span>NBTrainer<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">nb<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">'Survived'</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">pred &lt;-<span class="st"> </span>nb<span class="op">$</span><span class="kw">predict</span>(xtest)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">#&gt; Warning: predict.naive_bayes(): more features in the newdata are provided as</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt; there are probability tables in the object. Calculation is performed based on</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt; features to be found in the tables.</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> pred)</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; [1] 0.7771836</span></a></code></pre></div>
<p><strong>SVM Classification</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">#predicts labels</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">svm &lt;-<span class="st"> </span>SVMTrainer<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">svm<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">'Survived'</span>)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">pred &lt;-<span class="st"> </span>svm<span class="op">$</span><span class="kw">predict</span>(xtest)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted=</span>pred)</a></code></pre></div>
<p><strong>Logistic Regression</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">lf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;Survived&quot;</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">summary</span>(lf<span class="op">$</span>model)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt; stats::glm(formula = f, family = self$family, data = X, weights = self$weights)</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">#&gt; Deviance Residuals: </span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">#&gt;     Min       1Q   Median       3Q      Max  </span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">#&gt; -2.6102  -0.6018  -0.4367   0.7038   2.4493  </span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">#&gt;              Estimate Std. Error z value Pr(&gt;|z|)    </span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">#&gt; (Intercept)  1.830070   0.616894   2.967  0.00301 ** </span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#&gt; Pclass      -0.980785   0.192493  -5.095 3.48e-07 ***</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">#&gt; Sex          2.508241   0.230374  10.888  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="co">#&gt; Age         -0.041034   0.009309  -4.408 1.04e-05 ***</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18"><span class="co">#&gt; SibSp       -0.235520   0.117715  -2.001  0.04542 *  </span></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="co">#&gt; Parch       -0.098742   0.137791  -0.717  0.47361    </span></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="co">#&gt; Fare         0.001281   0.002842   0.451  0.65230    </span></a>
<a class="sourceLine" id="cb20-21" data-line-number="21"><span class="co">#&gt; Cabin        0.008408   0.004786   1.757  0.07899 .  </span></a>
<a class="sourceLine" id="cb20-22" data-line-number="22"><span class="co">#&gt; Embarked     0.248088   0.166616   1.489  0.13649    </span></a>
<a class="sourceLine" id="cb20-23" data-line-number="23"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb20-24" data-line-number="24"><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></a>
<a class="sourceLine" id="cb20-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb20-26" data-line-number="26"><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></a>
<a class="sourceLine" id="cb20-27" data-line-number="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb20-28" data-line-number="28"><span class="co">#&gt;     Null deviance: 831.52  on 623  degrees of freedom</span></a>
<a class="sourceLine" id="cb20-29" data-line-number="29"><span class="co">#&gt; Residual deviance: 564.76  on 615  degrees of freedom</span></a>
<a class="sourceLine" id="cb20-30" data-line-number="30"><span class="co">#&gt; AIC: 582.76</span></a>
<a class="sourceLine" id="cb20-31" data-line-number="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb20-32" data-line-number="32"><span class="co">#&gt; Number of Fisher Scoring iterations: 5</span></a>
<a class="sourceLine" id="cb20-33" data-line-number="33">predictions &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb20-34" data-line-number="34"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> predictions)</a>
<a class="sourceLine" id="cb20-35" data-line-number="35"><span class="co">#&gt; [1] 0.8832145</span></a></code></pre></div>
<p><strong>Lasso Logistic Regression</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>, <span class="dt">alpha=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">lf<span class="op">$</span><span class="kw">cv_model</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;Survived&quot;</span>, <span class="dt">nfolds =</span> <span class="dv">5</span>, <span class="dt">parallel =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">pred &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">cv_predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> pred)</a></code></pre></div>
<p><strong>Ridge Logistic Regression</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">lf &lt;-<span class="st"> </span>LMTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>, <span class="dt">alpha=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">lf<span class="op">$</span><span class="kw">cv_model</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;Survived&quot;</span>, <span class="dt">nfolds =</span> <span class="dv">5</span>, <span class="dt">parallel =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">pred &lt;-<span class="st"> </span>lf<span class="op">$</span><span class="kw">cv_predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> pred)</a></code></pre></div>
<p><strong>Random Forest</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">rf &lt;-<span class="st"> </span>RFTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">n_estimators =</span> <span class="dv">500</span>,<span class="dt">classification =</span> <span class="dv">1</span>, <span class="dt">max_features =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">rf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;Survived&quot;</span>)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"></a>
<a class="sourceLine" id="cb23-4" data-line-number="4">pred &lt;-<span class="st"> </span>rf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">rf<span class="op">$</span><span class="kw">get_importance</span>()</a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="co">#&gt;          tmp.order.tmp..decreasing...TRUE..</span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="co">#&gt; Sex                                67.80128</span></a>
<a class="sourceLine" id="cb23-8" data-line-number="8"><span class="co">#&gt; Fare                               57.97193</span></a>
<a class="sourceLine" id="cb23-9" data-line-number="9"><span class="co">#&gt; Age                                48.37045</span></a>
<a class="sourceLine" id="cb23-10" data-line-number="10"><span class="co">#&gt; Pclass                             24.64915</span></a>
<a class="sourceLine" id="cb23-11" data-line-number="11"><span class="co">#&gt; Cabin                              21.45972</span></a>
<a class="sourceLine" id="cb23-12" data-line-number="12"><span class="co">#&gt; SibSp                              13.51637</span></a>
<a class="sourceLine" id="cb23-13" data-line-number="13"><span class="co">#&gt; Parch                              10.45743</span></a>
<a class="sourceLine" id="cb23-14" data-line-number="14"><span class="co">#&gt; Embarked                           10.23844</span></a>
<a class="sourceLine" id="cb23-15" data-line-number="15"></a>
<a class="sourceLine" id="cb23-16" data-line-number="16"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> pred)</a>
<a class="sourceLine" id="cb23-17" data-line-number="17"><span class="co">#&gt; [1] 0.7976827</span></a></code></pre></div>
<p><strong>Xgboost</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">xgb &lt;-<span class="st"> </span>XGBTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">objective =</span> <span class="st">&quot;binary:logistic&quot;</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">                      , <span class="dt">n_estimators =</span> <span class="dv">500</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3">                      , <span class="dt">eval_metric =</span> <span class="st">&quot;auc&quot;</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4">                      , <span class="dt">maximize =</span> T</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">                      , <span class="dt">learning_rate =</span> <span class="fl">0.1</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6">                      ,<span class="dt">max_depth =</span> <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">xgb<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;Survived&quot;</span>, <span class="dt">valid =</span> xtest)</a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb24-9" data-line-number="9"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb24-10" data-line-number="10"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb24-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb24-13" data-line-number="13"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb24-14" data-line-number="14"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb24-15" data-line-number="15"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb24-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb24-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb24-18" data-line-number="18"><span class="co">#&gt; [1]  train-auc:0.886258  val-auc:0.879085 </span></a>
<a class="sourceLine" id="cb24-19" data-line-number="19"><span class="co">#&gt; Multiple eval metrics are present. Will use val_auc for early stopping.</span></a>
<a class="sourceLine" id="cb24-20" data-line-number="20"><span class="co">#&gt; Will train until val_auc hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb24-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb24-22" data-line-number="22"><span class="co">#&gt; [51] train-auc:0.972938  val-auc:0.866370 </span></a>
<a class="sourceLine" id="cb24-23" data-line-number="23"><span class="co">#&gt; Stopping. Best iteration:</span></a>
<a class="sourceLine" id="cb24-24" data-line-number="24"><span class="co">#&gt; [1]  train-auc:0.886258  val-auc:0.879085</span></a>
<a class="sourceLine" id="cb24-25" data-line-number="25"></a>
<a class="sourceLine" id="cb24-26" data-line-number="26">pred &lt;-<span class="st"> </span>xgb<span class="op">$</span><span class="kw">predict</span>(xtest)</a>
<a class="sourceLine" id="cb24-27" data-line-number="27"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> pred)</a>
<a class="sourceLine" id="cb24-28" data-line-number="28"><span class="co">#&gt; [1] 0.879085</span></a></code></pre></div>
<p><strong>Grid Search</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">xgb &lt;-<span class="st"> </span>XGBTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">objective=</span><span class="st">&quot;binary:logistic&quot;</span>)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">gst &lt;-GridSearchCV<span class="op">$</span><span class="kw">new</span>(<span class="dt">trainer =</span> xgb,</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">                             <span class="dt">parameters =</span> <span class="kw">list</span>(<span class="dt">n_estimators =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">50</span>),</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">                             <span class="dt">max_depth =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">                             <span class="dt">n_folds =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">                             <span class="dt">scoring =</span> <span class="kw">c</span>(<span class="st">'accuracy'</span>,<span class="st">'auc'</span>))</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">gst<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">&quot;Survived&quot;</span>)</a>
<a class="sourceLine" id="cb25-8" data-line-number="8"><span class="co">#&gt; [1] &quot;entering grid search&quot;</span></a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="co">#&gt; [1] &quot;In total, 4 models will be trained&quot;</span></a>
<a class="sourceLine" id="cb25-10" data-line-number="10"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-11" data-line-number="11"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-12" data-line-number="12"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-13" data-line-number="13"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-15" data-line-number="15"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-16" data-line-number="16"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-17" data-line-number="17"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-20" data-line-number="20"><span class="co">#&gt; [1]  train-logloss:0.559993 </span></a>
<a class="sourceLine" id="cb25-21" data-line-number="21"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-23" data-line-number="23"><span class="co">#&gt; [10] train-logloss:0.304225</span></a>
<a class="sourceLine" id="cb25-24" data-line-number="24"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-25" data-line-number="25"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-26" data-line-number="26"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-27" data-line-number="27"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-29" data-line-number="29"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-30" data-line-number="30"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-31" data-line-number="31"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-34" data-line-number="34"><span class="co">#&gt; [1]  train-logloss:0.558838 </span></a>
<a class="sourceLine" id="cb25-35" data-line-number="35"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-37" data-line-number="37"><span class="co">#&gt; [10] train-logloss:0.302156</span></a>
<a class="sourceLine" id="cb25-38" data-line-number="38"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-39" data-line-number="39"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-40" data-line-number="40"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-41" data-line-number="41"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-42" data-line-number="42"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-43" data-line-number="43"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-44" data-line-number="44"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-45" data-line-number="45"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-46" data-line-number="46"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-47" data-line-number="47"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-48" data-line-number="48"><span class="co">#&gt; [1]  train-logloss:0.547201 </span></a>
<a class="sourceLine" id="cb25-49" data-line-number="49"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-50" data-line-number="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-51" data-line-number="51"><span class="co">#&gt; [10] train-logloss:0.284697</span></a>
<a class="sourceLine" id="cb25-52" data-line-number="52"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-53" data-line-number="53"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-54" data-line-number="54"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-55" data-line-number="55"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-56" data-line-number="56"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-57" data-line-number="57"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-58" data-line-number="58"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-59" data-line-number="59"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-60" data-line-number="60"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-61" data-line-number="61"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-62" data-line-number="62"><span class="co">#&gt; [1]  train-logloss:0.559993 </span></a>
<a class="sourceLine" id="cb25-63" data-line-number="63"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-64" data-line-number="64"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-65" data-line-number="65"><span class="co">#&gt; [50] train-logloss:0.172763</span></a>
<a class="sourceLine" id="cb25-66" data-line-number="66"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-67" data-line-number="67"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-68" data-line-number="68"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-69" data-line-number="69"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-70" data-line-number="70"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-71" data-line-number="71"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-72" data-line-number="72"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-73" data-line-number="73"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-74" data-line-number="74"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-75" data-line-number="75"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-76" data-line-number="76"><span class="co">#&gt; [1]  train-logloss:0.558838 </span></a>
<a class="sourceLine" id="cb25-77" data-line-number="77"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-78" data-line-number="78"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-79" data-line-number="79"><span class="co">#&gt; [50] train-logloss:0.160542</span></a>
<a class="sourceLine" id="cb25-80" data-line-number="80"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-81" data-line-number="81"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-82" data-line-number="82"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-83" data-line-number="83"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-84" data-line-number="84"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-85" data-line-number="85"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-86" data-line-number="86"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-87" data-line-number="87"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-88" data-line-number="88"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-89" data-line-number="89"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-90" data-line-number="90"><span class="co">#&gt; [1]  train-logloss:0.547201 </span></a>
<a class="sourceLine" id="cb25-91" data-line-number="91"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-92" data-line-number="92"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-93" data-line-number="93"><span class="co">#&gt; [50] train-logloss:0.134347</span></a>
<a class="sourceLine" id="cb25-94" data-line-number="94"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-95" data-line-number="95"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-96" data-line-number="96"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-97" data-line-number="97"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-98" data-line-number="98"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-99" data-line-number="99"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-100" data-line-number="100"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-101" data-line-number="101"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-102" data-line-number="102"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-103" data-line-number="103"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-104" data-line-number="104"><span class="co">#&gt; [1]  train-logloss:0.586389 </span></a>
<a class="sourceLine" id="cb25-105" data-line-number="105"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-106" data-line-number="106"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-107" data-line-number="107"><span class="co">#&gt; [10] train-logloss:0.416683</span></a>
<a class="sourceLine" id="cb25-108" data-line-number="108"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-109" data-line-number="109"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-110" data-line-number="110"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-111" data-line-number="111"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-112" data-line-number="112"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-113" data-line-number="113"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-114" data-line-number="114"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-115" data-line-number="115"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-116" data-line-number="116"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-117" data-line-number="117"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-118" data-line-number="118"><span class="co">#&gt; [1]  train-logloss:0.590015 </span></a>
<a class="sourceLine" id="cb25-119" data-line-number="119"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-120" data-line-number="120"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-121" data-line-number="121"><span class="co">#&gt; [10] train-logloss:0.416606</span></a>
<a class="sourceLine" id="cb25-122" data-line-number="122"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-123" data-line-number="123"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-124" data-line-number="124"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-125" data-line-number="125"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-126" data-line-number="126"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-127" data-line-number="127"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-128" data-line-number="128"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-129" data-line-number="129"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-130" data-line-number="130"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-131" data-line-number="131"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-132" data-line-number="132"><span class="co">#&gt; [1]  train-logloss:0.582958 </span></a>
<a class="sourceLine" id="cb25-133" data-line-number="133"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-134" data-line-number="134"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-135" data-line-number="135"><span class="co">#&gt; [10] train-logloss:0.393512</span></a>
<a class="sourceLine" id="cb25-136" data-line-number="136"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-137" data-line-number="137"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-138" data-line-number="138"><span class="co">#&gt; [12:05:58] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-139" data-line-number="139"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-140" data-line-number="140"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-141" data-line-number="141"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-142" data-line-number="142"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-143" data-line-number="143"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-144" data-line-number="144"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-145" data-line-number="145"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-146" data-line-number="146"><span class="co">#&gt; [1]  train-logloss:0.586389 </span></a>
<a class="sourceLine" id="cb25-147" data-line-number="147"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-148" data-line-number="148"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-149" data-line-number="149"><span class="co">#&gt; [50] train-logloss:0.325189</span></a>
<a class="sourceLine" id="cb25-150" data-line-number="150"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-151" data-line-number="151"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-152" data-line-number="152"><span class="co">#&gt; [12:05:59] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-153" data-line-number="153"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-154" data-line-number="154"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-155" data-line-number="155"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-156" data-line-number="156"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-157" data-line-number="157"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-158" data-line-number="158"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-159" data-line-number="159"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-160" data-line-number="160"><span class="co">#&gt; [1]  train-logloss:0.590015 </span></a>
<a class="sourceLine" id="cb25-161" data-line-number="161"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-162" data-line-number="162"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-163" data-line-number="163"><span class="co">#&gt; [50] train-logloss:0.320031</span></a>
<a class="sourceLine" id="cb25-164" data-line-number="164"><span class="co">#&gt; converting the data into xgboost format..</span></a>
<a class="sourceLine" id="cb25-165" data-line-number="165"><span class="co">#&gt; starting with training...</span></a>
<a class="sourceLine" id="cb25-166" data-line-number="166"><span class="co">#&gt; [12:05:59] </span><span class="al">WARNING</span><span class="co">: amalgamation/../src/learner.cc:627: </span></a>
<a class="sourceLine" id="cb25-167" data-line-number="167"><span class="co">#&gt; Parameters: { &quot;nrounds&quot; } might not be used.</span></a>
<a class="sourceLine" id="cb25-168" data-line-number="168"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-169" data-line-number="169"><span class="co">#&gt;   This could be a false alarm, with some parameters getting used by language bindings but</span></a>
<a class="sourceLine" id="cb25-170" data-line-number="170"><span class="co">#&gt;   then being mistakenly passed down to XGBoost core, or some parameter actually being used</span></a>
<a class="sourceLine" id="cb25-171" data-line-number="171"><span class="co">#&gt;   but getting flagged wrongly here. Please open an issue if you find any such cases.</span></a>
<a class="sourceLine" id="cb25-172" data-line-number="172"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-173" data-line-number="173"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-174" data-line-number="174"><span class="co">#&gt; [1]  train-logloss:0.582958 </span></a>
<a class="sourceLine" id="cb25-175" data-line-number="175"><span class="co">#&gt; Will train until train_logloss hasn't improved in 50 rounds.</span></a>
<a class="sourceLine" id="cb25-176" data-line-number="176"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-177" data-line-number="177"><span class="co">#&gt; [50] train-logloss:0.308201</span></a>
<a class="sourceLine" id="cb25-178" data-line-number="178">gst<span class="op">$</span><span class="kw">best_iteration</span>()</a>
<a class="sourceLine" id="cb25-179" data-line-number="179"><span class="co">#&gt; $n_estimators</span></a>
<a class="sourceLine" id="cb25-180" data-line-number="180"><span class="co">#&gt; [1] 10</span></a>
<a class="sourceLine" id="cb25-181" data-line-number="181"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-182" data-line-number="182"><span class="co">#&gt; $max_depth</span></a>
<a class="sourceLine" id="cb25-183" data-line-number="183"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb25-184" data-line-number="184"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-185" data-line-number="185"><span class="co">#&gt; $accuracy_avg</span></a>
<a class="sourceLine" id="cb25-186" data-line-number="186"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb25-187" data-line-number="187"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-188" data-line-number="188"><span class="co">#&gt; $accuracy_sd</span></a>
<a class="sourceLine" id="cb25-189" data-line-number="189"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb25-190" data-line-number="190"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-191" data-line-number="191"><span class="co">#&gt; $auc_avg</span></a>
<a class="sourceLine" id="cb25-192" data-line-number="192"><span class="co">#&gt; [1] 0.8630918</span></a>
<a class="sourceLine" id="cb25-193" data-line-number="193"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-194" data-line-number="194"><span class="co">#&gt; $auc_sd</span></a>
<a class="sourceLine" id="cb25-195" data-line-number="195"><span class="co">#&gt; [1] 0.02270548</span></a></code></pre></div>
<p><strong>Random Search</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rf &lt;-<span class="st"> </span>RFTrainer<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rst &lt;-<span class="st"> </span>RandomSearchCV<span class="op">$</span><span class="kw">new</span>(<span class="dt">trainer =</span> rf,</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">                             <span class="dt">parameters =</span> <span class="kw">list</span>(<span class="dt">n_estimators =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">50</span>), <span class="dt">max_depth =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">                             <span class="dt">n_folds =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">                             <span class="dt">scoring =</span> <span class="kw">c</span>(<span class="st">'accuracy'</span>,<span class="st">'auc'</span>),</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">                             <span class="dt">n_iter =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-7" data-line-number="7">rst<span class="op">$</span><span class="kw">fit</span>(xtrain, <span class="st">&quot;Survived&quot;</span>)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="co">#&gt; [1] &quot;In total, 3 models will be trained&quot;</span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9">rst<span class="op">$</span><span class="kw">best_iteration</span>()</a>
<a class="sourceLine" id="cb26-10" data-line-number="10"><span class="co">#&gt; $n_estimators</span></a>
<a class="sourceLine" id="cb26-11" data-line-number="11"><span class="co">#&gt; [1] 50</span></a>
<a class="sourceLine" id="cb26-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb26-13" data-line-number="13"><span class="co">#&gt; $max_depth</span></a>
<a class="sourceLine" id="cb26-14" data-line-number="14"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb26-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb26-16" data-line-number="16"><span class="co">#&gt; $accuracy_avg</span></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="co">#&gt; [1] 0.7964744</span></a>
<a class="sourceLine" id="cb26-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb26-19" data-line-number="19"><span class="co">#&gt; $accuracy_sd</span></a>
<a class="sourceLine" id="cb26-20" data-line-number="20"><span class="co">#&gt; [1] 0.03090914</span></a>
<a class="sourceLine" id="cb26-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb26-22" data-line-number="22"><span class="co">#&gt; $auc_avg</span></a>
<a class="sourceLine" id="cb26-23" data-line-number="23"><span class="co">#&gt; [1] 0.7729436</span></a>
<a class="sourceLine" id="cb26-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb26-25" data-line-number="25"><span class="co">#&gt; $auc_sd</span></a>
<a class="sourceLine" id="cb26-26" data-line-number="26"><span class="co">#&gt; [1] 0.04283084</span></a></code></pre></div>
<p>Let’s create some new feature based on target variable using target encoding and test a model.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># add target encoding features</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">xtrain[, feat_<span class="dv">01</span> <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">smoothMean</span>(<span class="dt">train_df =</span> xtrain,</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">                        <span class="dt">test_df =</span> xtest,</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">                        <span class="dt">colname =</span> <span class="st">&quot;Embarked&quot;</span>,</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">                        <span class="dt">target =</span> <span class="st">&quot;Survived&quot;</span>)<span class="op">$</span>train[[<span class="dv">2</span>]]]</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">xtest[, feat_<span class="dv">01</span> <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">smoothMean</span>(<span class="dt">train_df =</span> xtrain,</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">                               <span class="dt">test_df =</span> xtest,</a>
<a class="sourceLine" id="cb27-8" data-line-number="8">                               <span class="dt">colname =</span> <span class="st">&quot;Embarked&quot;</span>,</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">                               <span class="dt">target =</span> <span class="st">&quot;Survived&quot;</span>)<span class="op">$</span>test[[<span class="dv">2</span>]]]</a>
<a class="sourceLine" id="cb27-10" data-line-number="10"></a>
<a class="sourceLine" id="cb27-11" data-line-number="11"><span class="co"># train a random forest</span></a>
<a class="sourceLine" id="cb27-12" data-line-number="12"><span class="co"># Random Forest</span></a>
<a class="sourceLine" id="cb27-13" data-line-number="13">rf &lt;-<span class="st"> </span>RFTrainer<span class="op">$</span><span class="kw">new</span>(<span class="dt">n_estimators =</span> <span class="dv">500</span>,<span class="dt">classification =</span> <span class="dv">1</span>, <span class="dt">max_features =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">rf<span class="op">$</span><span class="kw">fit</span>(<span class="dt">X =</span> xtrain, <span class="dt">y =</span> <span class="st">&quot;Survived&quot;</span>)</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">pred &lt;-<span class="st"> </span>rf<span class="op">$</span><span class="kw">predict</span>(<span class="dt">df =</span> xtest)</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">rf<span class="op">$</span><span class="kw">get_importance</span>()</a>
<a class="sourceLine" id="cb27-17" data-line-number="17"><span class="co">#&gt;          tmp.order.tmp..decreasing...TRUE..</span></a>
<a class="sourceLine" id="cb27-18" data-line-number="18"><span class="co">#&gt; Sex                               69.787235</span></a>
<a class="sourceLine" id="cb27-19" data-line-number="19"><span class="co">#&gt; Fare                              60.832089</span></a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="co">#&gt; Age                               52.982604</span></a>
<a class="sourceLine" id="cb27-21" data-line-number="21"><span class="co">#&gt; Pclass                            24.419818</span></a>
<a class="sourceLine" id="cb27-22" data-line-number="22"><span class="co">#&gt; Cabin                             21.419274</span></a>
<a class="sourceLine" id="cb27-23" data-line-number="23"><span class="co">#&gt; SibSp                             13.112177</span></a>
<a class="sourceLine" id="cb27-24" data-line-number="24"><span class="co">#&gt; Parch                             10.175269</span></a>
<a class="sourceLine" id="cb27-25" data-line-number="25"><span class="co">#&gt; feat_01                            6.675399</span></a>
<a class="sourceLine" id="cb27-26" data-line-number="26"><span class="co">#&gt; Embarked                           6.450819</span></a>
<a class="sourceLine" id="cb27-27" data-line-number="27"></a>
<a class="sourceLine" id="cb27-28" data-line-number="28"><span class="kw">auc</span>(<span class="dt">actual =</span> xtest<span class="op">$</span>Survived, <span class="dt">predicted =</span> pred)</a>
<a class="sourceLine" id="cb27-29" data-line-number="29"><span class="co">#&gt; [1] 0.8018717</span></a></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
